<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.js"></script>


    <script>
        var MQ = MathQuill.getInterface(2);
    </script>
    <style>
        body {
            background-color: rgb(49, 47, 47);
            color: white;
        }

        #math-field {
            width: 90%;
            padding-left: 10px;
            padding-top: 20px;
            padding-bottom: 20px;
            height: 60px;
        }
    </style>
</head>

<body>
    <button id="insert-math">Insert LaTeX</button>




    <!--EXAMPLE COMMON TEXT TRANSFORMED WITH MATHQUILL  -->
    <p>Solve <span id="problem">hello there\       nice\ y^5\ too\ \frac{4}{d}\ meet,
        </span>.</p>
    <script>
        var problemSpan = document.getElementById('problem');
        MQ.StaticMath(problemSpan);
    </script>




    <!-- EXAMPLE TO  CREATE AN EDITABLE MATH FIELD  -->
    <!-- <p><span id="answer">x=</span></p>
<script>
   var answerSpan = document.getElementById('answer');
   var answerMathField = MQ.MathField(answerSpan, {
       handlers: {
       edit: function() {
           var enteredMath = answerMathField.latex(); // Get entered math in LaTeX format
           checkAnswer(enteredMath);
       }
       }
   });
</script> -->













    <p>Type math here: <span id="math-field"></span></p>
    <p>LaTeX of what you typed: <span id="latex"></span></p>







    <script>
        var mathFieldSpan = document.getElementById('math-field');
        var latexSpan = document.getElementById('latex');

        var MQ = MathQuill.getInterface(2); // for backcompat
        var mathField = MQ.MathField(mathFieldSpan, {
            spaceBehavesLikeTab: false, // configurable
            handlers: {
                edit: function () { // useful event handlers
                    latexSpan.textContent = mathField.latex(); // simple API
                }
            }
        });
    </script>




    <script>
        var insertMathButton = document.getElementById('insert-math');

        document.body.addEventListener('click', function () {
            const fullLatex = mathField.latex();

            // Store or log the full LaTeX expression
            console.log(fullLatex);
        });

        mathField.focus();



    </script>




    <div class="parent">

        <span class="span" onclick="keyy('1')">a <sup>2</sup>



        </span>
        <span class="span" onclick="keyy('2')">a
            <sup>b</sup>


        </span>
 
 
                <span class="span spann" onclick="keyy('7')">
                    \sqrt{x}
                </span>
                <span class="span" onclick="keyy('8')">
                    <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="18px"
                        viewBox="0 0 1280.000000 1274.000000" preserveAspectRatio="xMidYMid meet">
                        <metadata>
                            Created by potrace 1.15, written by Peter Selinger 2001-2017
                        </metadata>
                        <g transform="translate(0.000000,1274.000000) scale(0.100000,-0.100000)" fill="#000000"
                            stroke="none">
                            <path d="M5889 12556 c-2 -2 -416 -6 -919 -10 -946 -7 -1467 -18 -1675 -37
       -250 -22 -604 -95 -825 -171 -208 -71 -433 -194 -534 -291 -24 -23 -98 -91
       -164 -150 -615 -552 -1027 -1170 -1374 -2067 -71 -182 -267 -764 -302 -897
       l-25 -93 198 0 198 0 108 173 c251 401 432 643 684 916 269 290 527 464 864
       580 329 113 642 159 1142 168 l310 5 24 -22 c22 -21 23 -28 17 -99 -22 -270
       -28 -337 -37 -431 -6 -58 -13 -145 -15 -195 -2 -49 -8 -115 -13 -145 -5 -30
       -9 -62 -10 -70 -1 -54 -11 -200 -19 -285 -5 -55 -10 -109 -10 -120 1 -11 -4
       -76 -10 -145 -6 -69 -10 -136 -10 -150 0 -14 -7 -106 -16 -205 -17 -202 -36
       -452 -41 -565 -2 -41 -9 -123 -14 -181 -6 -59 -8 -116 -6 -127 2 -12 0 -49 -5
       -84 -5 -35 -12 -117 -15 -183 -3 -66 -8 -142 -9 -170 -2 -27 -7 -99 -10 -160
       -4 -60 -11 -159 -16 -220 -5 -60 -14 -171 -20 -245 -33 -409 -66 -664 -156
       -1205 -157 -934 -313 -1471 -578 -1980 -145 -278 -257 -455 -574 -899 -193
       -272 -412 -590 -412 -601 0 -4 -13 -25 -28 -48 -95 -140 -183 -365 -219 -557
       -23 -128 -24 -376 -1 -480 63 -288 216 -510 464 -676 210 -140 424 -200 684
       -191 290 10 463 90 700 328 238 238 438 564 571 929 49 137 65 187 128 413
       203 724 436 1959 611 3237 104 757 168 1316 205 1765 44 538 206 2758 258
       3536 8 114 17 211 21 218 5 8 412 11 1548 11 l1541 0 -6 -67 c-3 -38 -15 -135
       -27 -218 -112 -797 -241 -2015 -350 -3300 -17 -198 -37 -436 -46 -530 -29
       -316 -25 -2506 5 -2912 67 -875 176 -1477 357 -1973 51 -139 178 -390 255
       -505 276 -410 643 -704 1059 -845 169 -58 254 -71 486 -77 392 -10 606 33 909
       182 241 119 476 288 682 493 418 413 682 897 879 1610 92 331 220 958 240
       1171 l7 71 -164 0 c-90 0 -180 -3 -200 -6 l-36 -6 -33 -152 c-76 -353 -150
       -530 -306 -731 -176 -228 -448 -402 -724 -463 -380 -85 -761 -42 -1119 124
       -378 176 -658 529 -804 1014 -60 196 -88 343 -100 515 -15 230 -15 1665 1
       1985 49 989 101 1630 213 2635 27 243 132 1089 169 1355 16 118 41 303 56 410
       15 107 31 201 36 208 8 9 319 12 1493 12 815 0 1496 3 1513 6 l31 6 6 597 c3
       328 7 722 10 877 5 238 3 286 -10 317 -10 25 -22 37 -35 37 -10 0 -23 8 -29
       18 -9 16 -179 17 -3319 19 -1820 1 -3311 1 -3313 -1z" />
                            <path d="M7644 5970 c0 -69 1 -97 3 -62 2 34 2 90 0 125 -2 34 -3 6 -3 -63z" />
                            <path d="M7632 5645 c0 -16 2 -22 5 -12 2 9 2 23 0 30 -3 6 -5 -1 -5 -18z" />
                        </g>
                    </svg>
                </span>
                <span class="span" onclick="keyy('9')">
                    ≤
                </span>
                <span class="span" onclick="keyy('10')">
                    ≥
                </span>
                <span class="span" onclick="keyy('11')">
                    sin
                </span>
                <span class="span" onclick="keyy('12')">
                    cos
                </span>
                <span class="span" onclick="keyy('13')">
                    tan
                </span>
                <span class="span" onclick="keyy('14')">
                    sin <sup>-1</sup>
                </span>
                <span class="span" onclick="keyy('15')">
                    cos<sup>-1</sup>
                </span>
                <span class="span" onclick="keyy('16')">
                    tan<sup>-1</sup>
                </span>
                <span class="span" onclick="keyy('17')">
                    log
                </span>
                <span class="span" onclick="keyy('18')">
                    ln
                </span>
                <span class="span spann" onclick="keyy('19')">
                    \frac{d}{dx}
                </span>
                <span class="span spann" onclick="keyy('20')">
                    \sqrt{x}
                </span>
                <span class="span spann" onclick="keyy('21')">
                    \sqrt[n]{x}
                </span>
                <span class="span spann" onclick="keyy('22')">
                    \int_a^b
                </span>
                <span class="span spann" onclick="keyy('23')">
                    \sum_a^b
                </span>
                <span class="span spann" onclick="keyy('24')">
                    \lim_{x \to a}
                </span>
                <span class="span spann" onclick="keyy('25')">
                    \alpha
                </span>
                <span class="span spann" onclick="keyy('26')">
                    \beta
                </span>
                <span class="span spann" onclick="keyy('27')">
                    \gamma

                </span>
                <span class="span spann" onclick="keyy('28')">
                    \delta
                </span>
                <span class="span spann" onclick="keyy('29')">
                    \theta
                </span>
                <span class="span spann" onclick="keyy('30')">
                    \sigma
                </span>
                <span class="span spann" onclick="keyy('31')">
                    \omega
                </span>
                <span class="span spann" onclick="keyy('32')">
                    \infty
                </span>
                <span class="span spann" onclick="keyy('33')">
                    \approx
                </span>
                <span class="span spann" onclick="keyy('34')">
                    \neq
                </span>
                <span class="span spann" onclick="keyy('35')">
                    \angle
                </span>
                <span class="span spann" onclick="keyy('36')">
                    ^\circ
                </span>
                <span class="span spann" onclick="keyy('37')">
                    \in
                </span>
                <span class="span spann" onclick="keyy('38')">
                    \notin
                </span>
                <span class="span spann" onclick="keyy('39')">
                    \subset
                </span>
                <span class="span spann" onclick="keyy('40')">
                    \supset
                </span>
                <span class="span spann" onclick="keyy('41')">
                    \left[\begin{matrix}a & b \\ c & d\end{matrix}\right]
                </span>
                <span class="span spann" onclick="keyy('42')">
                    \phi
                </span>
                <span class="span spann" onclick="keyy('43')">
                    \hat{x}
                </span>
                <span class="span spann" onclick="keyy('44')">
                    \perp
                </span>
                <span class="span spann" onclick="keyy('45')">
                    \frac{a}{b}
                </span>
                <span class="span spann" onclick="keyy('46')">

                </span>





    </div>

    <style>
        .span {
            margin: 0;
            padding: 0;
            font-size: 24px;
            padding-top: 10px;
            padding-bottom: 10px;
            padding-left: 15px;
            padding-right: 15px;
            margin-right: 12px;
            margin-bottom: 12px;
            background-color: #FBFBFB;
            border: 1px solid #D8D8D8;
            color: black;
            display: flexbox;
            margin-top: 20px;
        }
    </style>


    <script>
        var elements = document.getElementsByClassName('spann');


        for (var ddx of elements) {
            MQ.StaticMath(ddx);
        }



        //    MQ.StaticMath(ddx);

        window.keyy = async function (key0) {
            let currentLatex = mathField.latex();
            if (key0 == '1') {

                mathField.latex(`${currentLatex}^2`);

                mathField.focus();

            } else if (key0 == '2') {
                mathField.latex(`${currentLatex}^{}`);

                mathField.focus();

            } else if (key0 == '3') {

            } else if (key0 == '4') {

            } else if (key0 == '5') {

            } else if (key0 == '6') {

            } else if (key0 == '7') {

            } else if (key0 == '8') {

            } else if (key0 == '9') {

            } else if (key0 == '10') {

            } else if (key0 == '11') {

            } else if (key0 == '12') {

            } else if (key0 == '13') {

            } else if (key0 == '14') {

            } else if (key0 == '15') {

            } else if (key0 == '16') {

            } else if (key0 == '17') {

            } else if (key0 == '18') {

            } else if (key0 == '19') {

            } else if (key0 == '20') {

            } else if (key0 == '21') {

            } else if (key0 == '22') {

            } else if (key0 == '23') {

            } else if (key0 == '24') {

            } else if (key0 == '25') {

            } else if (key0 == '26') {

            } else if (key0 == '27') {

            } else if (key0 == '28') {

            } else if (key0 == '29') {

            } else if (key0 == '30') {

            } else if (key0 == '31') {

            } else if (key0 == '32') {

            } else if (key0 == '33') {

            } else if (key0 == '34') {

            } else if (key0 == '35') {

            } else if (key0 == '36') {

            } else if (key0 == '37') {

            } else if (key0 == '38') {

            } else if (key0 == '39') {

            } else if (key0 == '40') {

            } else if (key0 == '41') {

            } else if (key0 == '42') {

            } else if (key0 == '43') {

            } else if (key0 == '44') {

            } else if (key0 == '45') {
                let currentLatex = mathField.latex();
                mathField.latex(currentLatex + '\\frac{}{}');

                mathField.focus();
            } else if (key0 == '46') {

                // mathField.latex(`${currentLatex}^{\\text{}}`);

                try {
                    requestClipboardPermission();
                    const text = await navigator.clipboard.readText();

                    mathField.latex(`${currentLatex}\\ \\text{${text}}`);
                    console.log(text);
                    

                } catch (err) {
                    console.error("Failed to read clipboard content: ", err);
                }
            }

        };


        mathField.latex(`
\\begin{aligned}
x + y &= z \\\\
a + b &= c
\\end{aligned}
`);

        async function requestClipboardPermission() {
            try {
                // Check if the Permissions API is supported
                if (navigator.permissions) {
                    const result = await navigator.permissions.query({ name: "clipboard-read" });

                    if (result.state === "granted" || result.state === "prompt") {
                        console.log("Clipboard read permission is granted or needs user interaction.");
                    } else {
                        console.log("Clipboard read permission is denied.");
                    }
                } else {
                    console.log("Permissions API not supported in this browser.");
                }
            } catch (err) {
                console.error("Error checking clipboard permissions: ", err);
            }
        }

    </script>




</body>

</html>